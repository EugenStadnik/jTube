package org.jtube.handlers.segmentedPlaylist;

import org.apache.log4j.Logger;
import org.json.JSONArray;
import org.json.JSONObject;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jtube.data.result.ProductData;
import org.jtube.handlers.Handler;
import org.jtube.utils.net.UrlLoader;

import java.io.IOException;
import java.net.URL;
import java.util.*;

public class KinogoNetHandler implements Handler {

	private static final Logger LOGGER = Logger.getLogger(KinogoNetHandler.class);
	private static KinogoNetHandler instance;
	private static final SegmentedPlaylistHandler segmentedPlaylistHandler = SegmentedPlaylistHandler.getInstance();

	private KinogoNetHandler() {}

	public static synchronized KinogoNetHandler getInstance() {
		if(instance == null) {
			instance = new KinogoNetHandler();
		}
		return instance;
	}

	@Override
	public ProductData handle(Document document) throws IOException {
		String source = document.getElementsByClass("player-box visible full-text")
				.stream().map(Element::children).flatMap(Collection::stream)
				.map(element -> element.attr("src")).findFirst().orElse(null);
		if(source != null) {
			LOGGER.info("The html source for " + source + " video is parsed successfully.");
		} else {
			LOGGER.warn("The html source of current url is not parsed.");
			return null;
		}
		source = !source.contains("https:") ? "https:" + source : source;
		Document subDocument = UrlLoader.getInstance().load(new URL(source));
		return segmentedPlaylistHandler.handle(subDocument);
	}

	private JSONObject parseInputValue(String inputValue) {
		if(inputValue != null && !inputValue.isEmpty() && !inputValue.isBlank()
				&& inputValue.indexOf("{") == 0 && inputValue.lastIndexOf("}") == inputValue.length() - 1) {
			inputValue = inputValue.replaceAll("&quot;", "\"");
			JSONObject intermidiate = new JSONObject(inputValue);
			intermidiate.keySet().forEach(key -> intermidiate.put(key, parseStreams(decryptHex(intermidiate.getString(key)))));
			return intermidiate;
		} else {
			return null;
		}
	}

	private String decryptHex(String hex) {
		if(hex != null && !hex.isEmpty() && !hex.isBlank()) {
			hex = hex.contains("#") ? hex.replaceAll("#", "") : hex;
			StringBuilder result = new StringBuilder();
			int i = 0;
			while ((i + 3) < hex.length() + 1) {
				String hexChar = hex.substring(i, i + 3);
				char ch = (char)Integer.parseInt(hexChar, 16);
				result.append(ch);
				i = i + 3;
			}
			return result.toString();
		} else {
			return null;
		}
	}

	private JSONArray parseStreams(String decrypted) {
		if(decrypted != null && !decrypted.isEmpty() && !decrypted.isBlank()) {
			JSONArray result = new JSONArray();
			Arrays.stream(decrypted.split(",")).forEach((stream) -> {
				String key = stream.substring(stream.indexOf("[") + 1,stream.indexOf("]"));
				String value = Arrays.stream(stream.substring(stream.indexOf("]") + 1).split(" or "))
						.sorted().max(String::compareTo)
						.map(url -> url.contains("https:") ? url : "https:" + url)
						.orElse(null);
				JSONObject substream = new JSONObject();
				substream.put(key, value);
				result.put(substream);
			});
			return result;
		} else {
			return null;
		}
	}

	public static void main(String[] args) {
		String inputValue = "{&quot;381&quot;:&quot;#05b03303603007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06503503303206206603003603906403703203703603306603906506106503206606206506603706603803303403703203103803003006406606603702f03203303406303803706406503506303803706406306503803403303603206503903603206403603403806203706103103a03203003203103003203103803203002f03203403002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06503503303206206603003603906403703203703603306603906506106503206606206506603706603803303403703203103803003006406606603702f03203303406303803706406503506303803706406306503803403303603206503903603206403603403806203706103103a03203003203103003203103803203002f03203403002e06d07003402c05b03403803007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06503503303206206603003603906403703203703603306603906506106503206606206506603706603803303403703203103803003006406606603702f03203303406303803706406503506303803706406306503803403303603206503903603206403603403806203706103103a03203003203103003203103803203002f03203403002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06503503303206206603003603906403703203703603306603906506106503206606206506603706603803303403703203103803003006406606603702f03203303406303803706406503506303803706406306503803403303603206503903603206403603403806203706103103a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06503503303206206603003603906403703203703603306603906506106503206606206506603706603803303403703203103803003006406606603702f03203303406303803706406503506303803706406306503803403303603206503903603206403603403806203706103103a03203003203103003203103803203002f03203403002e06d07003402c05b03703203007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06503503303206206603003603906403703203703603306603906506106503206606206506603706603803303403703203103803003006406606603702f03203303406303803706406503506303803706406306503803403303603206503903603206403603403806203706103103a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06503503303206206603003603906403703203703603306603906506106503206606206506603706603803303403703203103803003006406606603702f03203303406303803706406503506303803706406306503803403303603206503903603206403603403806203706103103a03203003203103003203103803203002f03403803002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06503503303206206603003603906403703203703603306603906506106503206606206506603706603803303403703203103803003006406606603702f03203303406303803706406503506303803706406306503803403303603206503903603206403603403806203706103103a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06503503303206206603003603906403703203703603306603906506106503206606206506603706603803303403703203103803003006406606603702f03203303406303803706406503506303803706406306503803403303603206503903603206403603403806203706103103a03203003203103003203103803203002f03203403002e06d07003402c05b03103003803007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06503503303206206603003603906403703203703603306603906506106503206606206506603706603803303403703203103803003006406606603702f03203303406303803706406503506303803706406306503803403303603206503903603206403603403806203706103103a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06503503303206206603003603906403703203703603306603906506106503206606206506603706603803303403703203103803003006406606603702f03203303406303803706406503506303803706406306503803403303603206503903603206403603403806203706103103a03203003203103003203103803203002f03703203002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06503503303206206603003603906403703203703603306603906506106503206606206506603706603803303403703203103803003006406606603702f03203303406303803706406503506303803706406306503803403303603206503903603206403603403806203706103103a03203003203103003203103803203002f03403803002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06503503303206206603003603906403703203703603306603906506106503206606206506603706603803303403703203103803003006406606603702f03203303406303803706406503506303803706406306503803403303603206503903603206403603403806203706103103a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06503503303206206603003603906403703203703603306603906506106503206606206506603706603803303403703203103803003006406606603702f03203303406303803706406503506303803706406306503803403303603206503903603206403603403806203706103103a03203003203103003203103803203002f03203403002e06d070034&quot;,&quot;108&quot;:&quot;#05b03303603007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03203403002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03203403002e06d07003402c05b03403803007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03203403002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03203403002e06d07003402c05b03703203007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03403803002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03203403002e06d07003402c05b03103003803007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03703203002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03403803002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03203403002e06d070034&quot;,&quot;510&quot;:&quot;#05b03303603007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03506403803303103903103703006203303803606103106303503003806406403503703206106403506203603703103606103103303503703903706202f06603706103306306403806503203203103003603406506403906403303903403603706406406603106103806406203403a03203003203103003203103803203002f03203403002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03506403803303103903103703006203303803606103106303503003806406403503703206106403506203603703103606103103303503703903706202f06603706103306306403806503203203103003603406506403906403303903403603706406406603106103806406203403a03203003203103003203103803203002f03203403002e06d07003402c05b03403803007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03506403803303103903103703006203303803606103106303503003806406403503703206106403506203603703103606103103303503703903706202f06603706103306306403806503203203103003603406506403906403303903403603706406406603106103806406203403a03203003203103003203103803203002f03203403002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03506403803303103903103703006203303803606103106303503003806406403503703206106403506203603703103606103103303503703903706202f06603706103306306403806503203203103003603406506403906403303903403603706406406603106103806406203403a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03506403803303103903103703006203303803606103106303503003806406403503703206106403506203603703103606103103303503703903706202f06603706103306306403806503203203103003603406506403906403303903403603706406406603106103806406203403a03203003203103003203103803203002f03203403002e06d07003402c05b03703203007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03506403803303103903103703006203303803606103106303503003806406403503703206106403506203603703103606103103303503703903706202f06603706103306306403806503203203103003603406506403906403303903403603706406406603106103806406203403a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03506403803303103903103703006203303803606103106303503003806406403503703206106403506203603703103606103103303503703903706202f06603706103306306403806503203203103003603406506403906403303903403603706406406603106103806406203403a03203003203103003203103803203002f03403803002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03506403803303103903103703006203303803606103106303503003806406403503703206106403506203603703103606103103303503703903706202f06603706103306306403806503203203103003603406506403906403303903403603706406406603106103806406203403a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03506403803303103903103703006203303803606103106303503003806406403503703206106403506203603703103606103103303503703903706202f06603706103306306403806503203203103003603406506403906403303903403603706406406603106103806406203403a03203003203103003203103803203002f03203403002e06d07003402c05b03103003803007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03506403803303103903103703006203303803606103106303503003806406403503703206106403506203603703103606103103303503703903706202f06603706103306306403806503203203103003603406506403906403303903403603706406406603106103806406203403a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03506403803303103903103703006203303803606103106303503003806406403503703206106403506203603703103606103103303503703903706202f06603706103306306403806503203203103003603406506403906403303903403603706406406603106103806406203403a03203003203103003203103803203002f03703203002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03506403803303103903103703006203303803606103106303503003806406403503703206106403506203603703103606103103303503703903706202f06603706103306306403806503203203103003603406506403906403303903403603706406406603106103806406203403a03203003203103003203103803203002f03403803002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03506403803303103903103703006203303803606103106303503003806406403503703206106403506203603703103606103103303503703903706202f06603706103306306403806503203203103003603406506403906403303903403603706406406603106103806406203403a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03506403803303103903103703006203303803606103106303503003806406403503703206106403506203603703103606103103303503703903706202f06603706103306306403806503203203103003603406506403906403303903403603706406406603106103806406203403a03203003203103003203103803203002f03203403002e06d070034&quot;,&quot;286&quot;:&quot;#05b03303603007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06403506503806403506503703703203503403606503203803206106503206403703206306503803603403403906203606303203906503306203406602f03906103206603006606603306103006506206503303603203403803506103203203806603203206506503706206403803a03203003203103003203103803203002f03203403002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06403506503806403506503703703203503403606503203803206106503206403703206306503803603403403906203606303203906503306203406602f03906103206603006606603306103006506206503303603203403803506103203203806603203206506503706206403803a03203003203103003203103803203002f03203403002e06d07003402c05b03403803007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06403506503806403506503703703203503403606503203803206106503206403703206306503803603403403906203606303203906503306203406602f03906103206603006606603306103006506206503303603203403803506103203203806603203206506503706206403803a03203003203103003203103803203002f03203403002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06403506503806403506503703703203503403606503203803206106503206403703206306503803603403403906203606303203906503306203406602f03906103206603006606603306103006506206503303603203403803506103203203806603203206506503706206403803a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06403506503806403506503703703203503403606503203803206106503206403703206306503803603403403906203606303203906503306203406602f03906103206603006606603306103006506206503303603203403803506103203203806603203206506503706206403803a03203003203103003203103803203002f03203403002e06d07003402c05b03703203007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06403506503806403506503703703203503403606503203803206106503206403703206306503803603403403906203606303203906503306203406602f03906103206603006606603306103006506206503303603203403803506103203203806603203206506503706206403803a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06403506503806403506503703703203503403606503203803206106503206403703206306503803603403403906203606303203906503306203406602f03906103206603006606603306103006506206503303603203403803506103203203806603203206506503706206403803a03203003203103003203103803203002f03403803002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06403506503806403506503703703203503403606503203803206106503206403703206306503803603403403906203606303203906503306203406602f03906103206603006606603306103006506206503303603203403803506103203203806603203206506503706206403803a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06403506503806403506503703703203503403606503203803206106503206403703206306503803603403403906203606303203906503306203406602f03906103206603006606603306103006506206503303603203403803506103203203806603203206506503706206403803a03203003203103003203103803203002f03203403002e06d07003402c05b03103003803007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06403506503806403506503703703203503403606503203803206106503206403703206306503803603403403906203606303203906503306203406602f03906103206603006606603306103006506206503303603203403803506103203203806603203206506503706206403803a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06403506503806403506503703703203503403606503203803206106503206403703206306503803603403403906203606303203906503306203406602f03906103206603006606603306103006506206503303603203403803506103203203806603203206506503706206403803a03203003203103003203103803203002f03703203002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06403506503806403506503703703203503403606503203803206106503206403703206306503803603403403906203606303203906503306203406602f03906103206603006606603306103006506206503303603203403803506103203203806603203206506503706206403803a03203003203103003203103803203002f03403803002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06403506503806403506503703703203503403606503203803206106503206403703206306503803603403403906203606303203906503306203406602f03906103206603006606603306103006506206503303603203403803506103203203806603203206506503706206403803a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06403506503806403506503703703203503403606503203803206106503206403703206306503803603403403906203606303203906503306203406602f03906103206603006606603306103006506206503303603203403803506103203203806603203206506503706206403803a03203003203103003203103803203002f03203403002e06d070034&quot;,&quot;2&quot;:&quot;#05b03303603007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06303503703503806306603206403703403603503003303603806306603803903606106506203703706303403903206506103103703503706306403102f03506106603203506303703006603103006603103803806106603106303603406606503403203003203203603903806503a03203003203103003203103803203002f03203403002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06303503703503806306603206403703403603503003303603806306603803903606106506203703706303403903206506103103703503706306403102f03506106603203506303703006603103006603103803806106603106303603406606503403203003203203603903806503a03203003203103003203103803203002f03203403002e06d07003402c05b03403803007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06303503703503806306603206403703403603503003303603806306603803903606106506203703706303403903206506103103703503706306403102f03506106603203506303703006603103006603103803806106603106303603406606503403203003203203603903806503a03203003203103003203103803203002f03203403002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06303503703503806306603206403703403603503003303603806306603803903606106506203703706303403903206506103103703503706306403102f03506106603203506303703006603103006603103803806106603106303603406606503403203003203203603903806503a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06303503703503806306603206403703403603503003303603806306603803903606106506203703706303403903206506103103703503706306403102f03506106603203506303703006603103006603103803806106603106303603406606503403203003203203603903806503a03203003203103003203103803203002f03203403002e06d07003402c05b03703203007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06303503703503806306603206403703403603503003303603806306603803903606106506203703706303403903206506103103703503706306403102f03506106603203506303703006603103006603103803806106603106303603406606503403203003203203603903806503a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06303503703503806306603206403703403603503003303603806306603803903606106506203703706303403903206506103103703503706306403102f03506106603203506303703006603103006603103803806106603106303603406606503403203003203203603903806503a03203003203103003203103803203002f03403803002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06303503703503806306603206403703403603503003303603806306603803903606106506203703706303403903206506103103703503706306403102f03506106603203506303703006603103006603103803806106603106303603406606503403203003203203603903806503a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06303503703503806306603206403703403603503003303603806306603803903606106506203703706303403903206506103103703503706306403102f03506106603203506303703006603103006603103803806106603106303603406606503403203003203203603903806503a03203003203103003203103803203002f03203403002e06d07003402c05b03103003803007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06303503703503806306603206403703403603503003303603806306603803903606106506203703706303403903206506103103703503706306403102f03506106603203506303703006603103006603103803806106603106303603406606503403203003203203603903806503a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06303503703503806306603206403703403603503003303603806306603803903606106506203703706303403903206506103103703503706306403102f03506106603203506303703006603103006603103803806106603106303603406606503403203003203203603903806503a03203003203103003203103803203002f03703203002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06303503703503806306603206403703403603503003303603806306603803903606106506203703706303403903206506103103703503706306403102f03506106603203506303703006603103006603103803806106603106303603406606503403203003203203603903806503a03203003203103003203103803203002f03403803002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06303503703503806306603206403703403603503003303603806306603803903606106506203703706303403903206506103103703503706306403102f03506106603203506303703006603103006603103803806106603106303603406606503403203003203203603903806503a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f06303503703503806306603206403703403603503003303603806306603803903606106506203703706303403903206506103103703503706306403102f03506106603203506303703006603103006603103803806106603106303603406606503403203003203203603903806503a03203003203103003203103803203002f03203403002e06d070034&quot;}";
		String data = "05b03303603007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03203403002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03203403002e06d07003402c05b03403803007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03203403002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03203403002e06d07003402c05b03703203007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03403803002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03203403002e06d07003402c05b03103003803007005d02f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03703203002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03403803002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03303603002e06d07003402006f07202002f02f06306c06f07506402e06306406e06c06106e06402e06906e02f06d06f07606906507302f03203006206103003503306506503303106306106206606103703706603606203603303103503503106403606306103703206506506503003003303602f03503103506403403106106303403406403203603603203503606603203303103503903503606506403003503906206303a03203003203103003203103803203002f03203403002e06d070034";
		String decrypted = getInstance().decryptHex(data);
		System.out.println(decrypted);
		JSONObject intermediate = getInstance().parseInputValue(inputValue);
		System.out.println(intermediate.toString(3));
		List<String> values = new ArrayList<>();
		values.add("https://cloud.cdnland.in/movies/e532bf069d72763f9eae2fbef7f834721800dff7/234c87de5c87dce84362e962d648b7a1:2021021820/240.mp4");
		values.add("https://cloud.cdnland.in/movies/e532bf069d72763f9eae2fbef7f834721800dff7/234c87de5c87dce84362e962d648b7a1:2021021820/360.mp4");
		values.add("https://cloud.cdnland.in/movies/e532bf069d72763f9eae2fbef7f834721800dff7/234c87de5c87dce84362e962d648b7a1:2021021820/480.mp4");
		values.add("https://cloud.cdnland.in/movies/e532bf069d72763f9eae2fbef7f834721800dff7/234c87de5c87dce84362e962d648b7a1:2021021820/720.mp4");
		values.add("https://cloud.cdnland.in/movies/e532bf069d72763f9eae2fbef7f834721800dff7/234c87de5c87dce84362e962d648b7a1:2021021820/1080.mp4");
		Collections.sort(values);
		System.out.println(new JSONArray(values).toString(3));
	}

}
